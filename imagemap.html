<!DOCTYPE html>
<html lang="en">

<head>

    <script>
        // following defaults may be set as calling parameters
        // url to master csv file
        var csvMasterUrl = "csv/table_sample_master.csv";
        // main base map
        var baseMapUrl = "img/map_sample.jpg";
        // base map max coordinates (lower left corner is always 0:0)
        var mapBoundsMax = [2160, 3840];
        // base map zoom range and default zoom
        var mapZoom = [-2, 4, -1];

        // following defaults may be overwritten in csv tables
        var titleText = "Custom map with POI-s from CSV table";
        var baseMapAttribution = "Sample maps from reddit r/dndmaps";

        // parse url parameters, if given

        var url = new URL(window.location.toLocaleString());
        console.log(url);

        // CSV master table URL (if using Google Sheets, then the table must be published to Web in csv format)
        var paramCsvMasterUrl = url.searchParams.get("csvMasterUrl");
        if (!(paramCsvMasterUrl === null || paramCsvMasterUrl === "")) {
            csvMasterUrl = paramCsvMasterUrl;
            console.log("csvMasterUrl:", csvMasterUrl);
        }

        // base map URL
        var paramBaseMapUrl = url.searchParams.get("baseMapUrl");
        if (!(paramBaseMapUrl === null || paramBaseMapUrl === "")) {
            baseMapUrl = paramBaseMapUrl;
            console.log("baseMapUrl", baseMapUrl);
        }
        // map bounds
        var paramMapBoundsMax = url.searchParams.get("mapBoundsMax");
        if (!(paramMapBoundsMax === null || paramMapBoundsMax === "")) {
            mapBoundsMax = String(paramMapBoundsMax).split(',');
            console.log("mapBoundsMax", mapBoundsMax);
        }
        // map zoom range and default
        var paramMapZoom = url.searchParams.get("mapZoom");
        if (!(paramMapZoom === null || paramMapZoom === "")) {
            mapZoom = String(paramMapZoom).split(',');
            console.log("mapZoom", mapZoom);
        }

    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom map with POI-s from CSV table</title>

    <!-- imagemap css -->
    <link rel="stylesheet" href="css/imagemap.css" />

    <!-- Google open sans font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

    <!-- Leaflet css. NB! Modified (different tooltip), but should be in right folder, relative to other leaflet files -->
    <!-- Leaflet javascript uses css folder to determine default icon location -->
    <link rel="stylesheet" href="lib/leaflet-1.9.3/leaflet-modified.css" />
    <!-- Leaflet css, using my own modified version (different tooltip)-->
    <!-- <link rel="stylesheet" href="css/leaflet-modified.css" /> -->

    <!-- Font awesome v4 -->
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">

    <!-- Leaflet awesome markers -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />

</head>

<body>
    <div class="marker-position">
        <i class="fa fa-map-marker"></i>
        Click on map
    </div>

    <div id="map"></div>

    <!-- Javascripts -->

    <!-- imagemap script -->
    <script src="js/imagemap.js"></script>

    <!-- 3rd party libraries -->

    <!-- Leaflet js -->
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="lib/leaflet-1.9.3/leaflet.js"></script>

    <!-- Leaflet with font awesome -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

    <!-- Papa Parse -->
    <script src="lib/papaparse-5.3.2/papaparse.min.js"></script>
</body>

</html>